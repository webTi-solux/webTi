{"ast":null,"code":"var _jsxFileName = \"/Users/butter/\\u1109\\u1169\\u11AF\\u1105\\u116E\\u11A8\\u1109\\u1173/Webti \\u110B\\u1170\\u11B8\\u1111\\u1173\\u11AF\\u110C\\u1166\\u11A8/webTi/src/components/LikeBtn.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport React, { Component } from 'react';\nimport styled from \"styled-components\";\nimport EmptyHeartImg from \"../imgs/emptyheart.png\";\nimport FullHeartImg from \"../imgs/fullheart.png\";\nimport \"../styles/Btns.css\";\nimport LikedList from \"./LikedList\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LikeBtn = _ref => {\n  _s();\n  let {\n    doneId\n  } = _ref;\n  const [state, setState] = useState(false);\n  const onClick = async e => {\n    e.preventDefault();\n    if (state === false) {\n      setState(true);\n      await axios.post('/like/', {\n        userId: sessionStorage.userId,\n        doneId: doneId\n      });\n    } else {\n      setState(false);\n      await axios.delete('/like/' + heartid);\n    }\n  };\n  const [heartid, setHeartid] = useState(\"\");\n  const heartlists = async () => {\n    const hearts = await axios.get('/like/').then(res => {\n      return res.data;\n    }); ///hearts에 _id있음\n\n    let heartname = hearts.find(item => item.userId == sessionStorage.userId && item.doneId == doneId);\n    if (heartname !== undefined) {\n      setHeartid(heartname._id);\n      setState(true);\n    }\n  };\n  useEffect(() => {\n    heartlists();\n  });\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [state ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"heartBtn\",\n          onClick: onClick,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            width: \"47px\",\n            src: FullHeartImg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 60\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"heartBtn\",\n          onClick: onClick,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            width: \"47px\",\n            src: EmptyHeartImg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"liked\",\n          children: \"\\uC88B\\uC544\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(LikeBtn, \"25DudQCN6xafghn8fEqFTbg33ks=\");\n_c = LikeBtn;\nexport default LikeBtn;\nvar _c;\n$RefreshReg$(_c, \"LikeBtn\");","map":{"version":3,"names":["useEffect","useState","React","Component","styled","EmptyHeartImg","FullHeartImg","LikedList","useNavigate","axios","LikeBtn","doneId","state","setState","onClick","e","preventDefault","post","userId","sessionStorage","delete","heartid","setHeartid","heartlists","hearts","get","then","res","data","heartname","find","item","undefined","_id"],"sources":["/Users/butter/솔룩스/Webti 웹플젝/webTi/src/components/LikeBtn.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport React, {Component} from 'react';\nimport styled from \"styled-components\";\nimport EmptyHeartImg from \"../imgs/emptyheart.png\";\nimport FullHeartImg from \"../imgs/fullheart.png\";\nimport \"../styles/Btns.css\";\nimport LikedList from \"./LikedList\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst LikeBtn = ({doneId}) => {\n\n    const [state, setState] = useState(false)\n\n\n    const onClick = async (e) => {\n        e.preventDefault();\n\n        if (state === false) {\n            setState(true);\n\n            await axios.post('/like/', {userId: sessionStorage.userId, doneId: doneId});\n\n        }\n\n        else {\n            setState(false);\n            await axios.delete('/like/'+heartid)\n        }\n    }\n\n    \n    const [heartid, setHeartid] = useState(\"\");\n\n    const heartlists = async () => {\n        const hearts = await axios.get('/like/').then((res) => { return res.data });  ///hearts에 _id있음\n\n\n        let heartname = hearts.find((item) => item.userId == sessionStorage.userId && item.doneId == doneId)\n        if (heartname !== undefined) {\n          setHeartid(heartname._id)\n          setState(true);\n        }\n      }\n\n      useEffect(() => {\n        heartlists();\n\n      }, )\n\n    return (\n        <React.Fragment>\n        <div>\n            <div>\n            {state ?\n            <button className=\"heartBtn\" onClick={onClick}><img width=\"47px\" src={FullHeartImg} /></button>\n            : <button className=\"heartBtn\" onClick={onClick}><img width=\"47px\" src={EmptyHeartImg} /></button>}\n            <div className=\"liked\">좋아요</div>\n            </div>\n        </div>\n        </React.Fragment>\n    );\n}\n\n\nexport default LikeBtn;"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,KAAK,IAAGC,SAAS,QAAO,OAAO;AACtC,OAAOC,MAAM,MAAM,mBAAmB;AACtC,OAAOC,aAAa,MAAM,wBAAwB;AAClD,OAAOC,YAAY,MAAM,uBAAuB;AAChD,OAAO,oBAAoB;AAC3B,OAAOC,SAAS,MAAM,aAAa;AACnC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AAAC;AAE1B,MAAMC,OAAO,GAAG,QAAc;EAAA;EAAA,IAAb;IAACC;EAAM,CAAC;EAErB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAGzC,MAAMa,OAAO,GAAG,MAAOC,CAAC,IAAK;IACzBA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAIJ,KAAK,KAAK,KAAK,EAAE;MACjBC,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMJ,KAAK,CAACQ,IAAI,CAAC,QAAQ,EAAE;QAACC,MAAM,EAAEC,cAAc,CAACD,MAAM;QAAEP,MAAM,EAAEA;MAAM,CAAC,CAAC;IAE/E,CAAC,MAEI;MACDE,QAAQ,CAAC,KAAK,CAAC;MACf,MAAMJ,KAAK,CAACW,MAAM,CAAC,QAAQ,GAACC,OAAO,CAAC;IACxC;EACJ,CAAC;EAGD,MAAM,CAACA,OAAO,EAAEC,UAAU,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMsB,UAAU,GAAG,YAAY;IAC3B,MAAMC,MAAM,GAAG,MAAMf,KAAK,CAACgB,GAAG,CAAC,QAAQ,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;MAAE,OAAOA,GAAG,CAACC,IAAI;IAAC,CAAC,CAAC,CAAC,CAAE;;IAG9E,IAAIC,SAAS,GAAGL,MAAM,CAACM,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACb,MAAM,IAAIC,cAAc,CAACD,MAAM,IAAIa,IAAI,CAACpB,MAAM,IAAIA,MAAM,CAAC;IACpG,IAAIkB,SAAS,KAAKG,SAAS,EAAE;MAC3BV,UAAU,CAACO,SAAS,CAACI,GAAG,CAAC;MACzBpB,QAAQ,CAAC,IAAI,CAAC;IAChB;EACF,CAAC;EAEDb,SAAS,CAAC,MAAM;IACduB,UAAU,EAAE;EAEd,CAAC,CAAG;EAEN,oBACI,QAAC,KAAK,CAAC,QAAQ;IAAA,uBACf;MAAA,uBACI;QAAA,WACCX,KAAK,gBACN;UAAQ,SAAS,EAAC,UAAU;UAAC,OAAO,EAAEE,OAAQ;UAAA,uBAAC;YAAK,KAAK,EAAC,MAAM;YAAC,GAAG,EAAER;UAAa;YAAA;YAAA;YAAA;UAAA;QAAG;UAAA;UAAA;UAAA;QAAA,QAAS,gBAC7F;UAAQ,SAAS,EAAC,UAAU;UAAC,OAAO,EAAEQ,OAAQ;UAAA,uBAAC;YAAK,KAAK,EAAC,MAAM;YAAC,GAAG,EAAET;UAAc;YAAA;YAAA;YAAA;UAAA;QAAG;UAAA;UAAA;UAAA;QAAA,QAAS,eAClG;UAAK,SAAS,EAAC,OAAO;UAAA,UAAC;QAAG;UAAA;UAAA;UAAA;QAAA,QAAM;MAAA;QAAA;QAAA;QAAA;MAAA;IAC1B;MAAA;MAAA;MAAA;IAAA;EACJ;IAAA;IAAA;IAAA;EAAA,QACW;AAEzB,CAAC;AAAA,GApDKK,OAAO;AAAA,KAAPA,OAAO;AAuDb,eAAeA,OAAO;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}